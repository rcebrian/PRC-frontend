<!-- .offset-md-3-->
<script src="administrator.component.ts"></script>
<div class="cont">
  <div class="card-columns">
    <div class="card left">
      <div class="card-header text-white" id="trainModelCard">Create a new training model</div>
      <div class="card-body">
        <form (ngSubmit)="createModel()" #modelForm="ngForm">
          <select class="selectModel form-control" (change)="onChangeAlgorithm($event.target)">
            <option *ngFor="let a of algorithms" [value]="a.id">{{a.name}}</option>
          </select>

          <mat-form-field class="date bottomMargin">
            <input matInput type="date" placeholder="Start date" [max]="todayDate" [matDatepicker]="datepickerStart"
                   name="datepicker" ngModel #dateCtrl="ngModel" [(ngModel)]="startDateStr" required readonly/>
            <mat-datepicker-toggle [for]="datepickerStart" matSuffix></mat-datepicker-toggle>
            <mat-datepicker #datepickerStart></mat-datepicker>
            <mat-error *ngIf="dateCtrl.errors?.required ">Choose a Date</mat-error>
          </mat-form-field>

          <mat-form-field class="date">
            <input matInput type="date" placeholder="End date"  [min]="startDateStr" [max]="todayDate" [matDatepicker]="datepickerEnd"
                   name="datepicker" ngModel #dateCtrl="ngModel" [(ngModel)]="endDateStr" required readonly/>
            <mat-datepicker-toggle [for]="datepickerEnd" matSuffix></mat-datepicker-toggle>
            <mat-datepicker #datepickerEnd></mat-datepicker>
            <mat-error *ngIf="dateCtrl.errors?.required">Choose a Date</mat-error>
          </mat-form-field>

          <textarea class="textBox" readonly="readonly" id="textMargin">{{algorithmDescription}}</textarea>
          <p><b>Select the characteristics for the training</b></p>
          <div class="row row_style">
            <div class="col-md-4">
              <div class="form-check">
                <label><input text="jaj" class="form-check-input position-static" type="checkbox"
                              name="date" ngModel required [(ngModel)]="date"> Date</label>
              </div>
              <div class="form-check">
                <label><input class="form-check-input position-static" type="checkbox"
                              name="time" ngModel [(ngModel)]="time" > Time</label>
              </div>
              <div class="form-check">
                <label><input class="form-check-input position-static" type="checkbox"
                              name="id" ngModel [(ngModel)]="id"> Flight identifier</label>
              </div>
              <div class="form-check">
                <label><input class="form-check-input position-static" type="checkbox"
                              name="airline_id" ngModel [(ngModel)]="airline_id"> Airline</label>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-check">
                <label><input class="form-check-input position-static" type="checkbox"
                              name="city_id" ngModel [(ngModel)]="city_id"> Destination</label>
              </div>
              <div class="form-check">
                <label><input class="form-check-input position-static" type="checkbox"
                              name="airport_id" ngModel [(ngModel)]="airport_id"> Airport ID</label>
              </div>
              <div class="form-check">
                <label><input class="form-check-input position-static" type="checkbox"
                              name="temperature" ngModel [(ngModel)]="temperature"> Temperature</label>
              </div>
              <div class="form-check">
                <label><input class="form-check-input position-static" type="checkbox"
                              name="humidity" ngModel [(ngModel)]="humidity"> Humidity</label>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-check">
                <label><input class="form-check-input position-static" type="checkbox"
                              name="wind_speed" ngModel [(ngModel)]="wind_speed"> Wind speed</label>
              </div>
              <div class="form-check">
                <label><input class="form-check-input position-static" type="checkbox"
                              name="wind_direction" ngModel [(ngModel)]="wind_direction"> Wind direction</label>
              </div>
              <div class="form-check">
                <label><input class="form-check-input position-static" type="checkbox"
                              name="pressure" ngModel [(ngModel)]="pressure"> Pressure</label>
              </div>
            </div>
            <div *ngIf="characteristicsError" class="error">{{characteristicsError}}</div>
          </div>
          <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4">
              <button class="submit form-control btn text-white" id="trainModelBtn" title="Create"
                      [attr.disabled]="(buttonDisabledModel == true ? true : null)" type="submit">{{buttonModelStr}}</button>
            </div>
            <div class="col-md-4"></div>
          </div>
        </form>
      </div>
    </div>

    <div class="card left">
      <div class="card-header text-white"  id="selectModelCard">Change selected training model</div>
      <div class="card-body">
        <form (ngSubmit)="selectUseModel()" #selectModelForm="ngForm">
          <select class="selectModel form-control" (change)="onChangeModelType($event.target.value)">
            <option *ngFor="let a of algorithms" [value]="a.id">{{a.name}}</option>
          </select>

          <select class="selectModel form-control" (change)="onChangeModelDate($event.target.value)">
            <option *ngFor="let m of dateArrayModels" [value]="m.id">{{m.date}}</option>
          </select>

          <table id="tableReport">
            <tr>
              <th></th>
              <th>Precision</th>
              <th>Recall</th>
              <th>F1-score</th>
            </tr>
            <tr>
              <th>0</th>
              <td *ngIf="selectModel">{{selectModel.report_precision_0}}</td>
              <td *ngIf="selectModel">{{selectModel.report_recall_0}}</td>
              <td *ngIf="selectModel">{{selectModel.report_f1_score_0}}</td>
            </tr>
            <tr>
              <th>1</th>
              <td *ngIf="selectModel">{{selectModel.report_precision_1}}</td>
              <td *ngIf="selectModel">{{selectModel.report_recall_1}}</td>
              <td *ngIf="selectModel">{{selectModel.report_f1_score_1}}</td>
            </tr>
            <tr>
              <th>Macro avg</th>
              <td *ngIf="selectModel">{{selectModel.report_accuracy_precision}}</td>
              <td *ngIf="selectModel">{{selectModel.report_accuracy_recall}}</td>
              <td *ngIf="selectModel">{{selectModel.report_accuracy_f1_score}}</td>
            </tr>
          </table>

          <div id="numRows">
            <label><b>Number of rows: </b><span *ngIf="selectModel">{{selectModel.report_num_rows}}</span></label>
          </div>

          <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4">
              <button class="submit form-control btn text-white" id="selectModelBtn" title="Apply"
                      type="submit" [attr.disabled]="(buttonDisabledUpdate == true ? true : null)">{{buttonUpdateStr}}</button>
            </div>
            <div class="col-md-4"></div>
          </div>
        </form>
      </div>
    </div>

    <div class="card left">
      <div class="card-header text-white updateDataTrainCard">Run update training data</div>
      <div class="card-body">
        <form (ngSubmit)="updateTrainData()" #selectTrainDataForm="ngForm">
          <mat-form-field class="date dateMargin bottomMargin">
            <input matInput type="date" placeholder="Start date" [min]="minDateTrain" [max]="yesterday"
                   [matDatepicker]="datepickerStartTraining"
                   name="datepicker" ngModel #dateCtrl="ngModel" [(ngModel)]="dateStrTrain" required readonly/>
            <mat-datepicker-toggle [for]="datepickerStartTraining" matSuffix></mat-datepicker-toggle>
            <mat-datepicker #datepickerStartTraining></mat-datepicker>
            <mat-error *ngIf="dateCtrl.errors?.required ">Choose a Date</mat-error>
          </mat-form-field>

          <label>Airport ID</label>
          <input class="form-control" name="airportId" type="number" [(ngModel)]="airportIdTrain">
          <div *ngIf="errorAirportId" class="error">{{errorAirportId}}</div>
          <div class="row">
            <div class="col-md-4">
              <button class="submit updateTrainBtn topMargin form-control btn" title="Update" (click)="selectButtonTrain = 0"
                      type="submit" [attr.disabled]="(buttonDisabledFlightTrainData == true ? true : null)">{{buttonUpdateFlightTrainStr}}</button>
            </div>
            <div class="col-md-4">
              <button class="submit updateTrainBtn topMargin form-control btn" title="Update" (click)="selectButtonTrain = 1"
                      type="submit" [attr.disabled]="(buttonDisabledWeatherTrainData == true ? true : null)">{{buttonUpdateWeatherTrainStr}}</button>
            </div>
            <div class="col-md-4">
              <button class="submit updateDataTrainCard topMargin form-control btn text-white" title="Update" (click)="selectButtonTrain =2"
                      type="submit" [attr.disabled]="(buttonDisabledAllTrainData == true ? true : null)">{{buttonUpdateAllTrainStr}}</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <div class="card right">
      <div class="card-header text-white updateDataNowCard">Run Update now data</div>
      <div class="card-body">
        <form (ngSubmit)="updateNowData()" #selectNowDataForm="ngForm">
          <label>Airport ID</label>
          <input class="form-control" name="airportId" type="number" [(ngModel)]="airportIdNow">
          <div *ngIf="errorAirportNow" class="error">{{errorAirportNow}}</div>

          <div class="row">
            <div class="col-md-4">
              <button class="submit updateNowBtn topMargin form-control btn" title="Update" (click)="selectButtonNow=0"
                      type="submit" [attr.disabled]="(buttonDisabledFlightNowData == true ? true : null)">{{buttonUpdateFlightNowStr}}</button>
            </div>
            <div class="col-md-4">
              <button class="submit updateNowBtn topMargin form-control btn" title="Update" (click)="selectButtonNow=1"
                      type="submit" [attr.disabled]="(buttonDisabledWeatherNowData == true ? true : null)">{{buttonUpdateWeatherNowStr}}</button>
            </div>
            <div class="col-md-4">
              <button class="submit updateDataNowCard topMargin form-control btn text-white" title="Update" (click)="selectButtonNow=2"
                      type="submit" [attr.disabled]="(buttonDisabledAllNowData == true ? true : null)">{{buttonUpdateAllNowStr}}</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <div class="card right">
      <div class="card-header text-white updateDataCommentCard">Run Comments Data</div>
      <div class="card-body">
        <form (ngSubmit)="updateCommentData()" #selectCommentDataForm="ngForm">
          <label>City ID</label>
          <input class="form-control" name="cityId" type="number" [(ngModel)]="cityId">
          <div *ngIf="errorCityIdError" class="error">{{errorCityIdError}}</div>

          <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4">
              <button class="submit updateDataCommentCard topMargin form-control btn text-white" title="Update" type="submit">Update</button>
            </div>
            <div class="col-md-4"></div>
          </div>
        </form>
      </div>
    </div>

    <div class="card right">
      <div class="card-header text-white updateUrlColor">Run Update URL's Airports</div>
      <div class="card-body">
        <form (ngSubmit)="updateUrlData()" #selectURLDataForm="ngForm">
          <label>Country ID</label>
          <input class="form-control" name="airportId" type="number" [(ngModel)]="countryId">
          <div *ngIf="errorUrl" class="error">{{errorUrl}}</div>

          <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4">
              <button class="submit updateUrlColor topMargin form-control btn text-white"
                      title="Update" type="submit"
                      [attr.disabled]="(buttonDisabledUrlData == true ? true : null)">{{buttonUpdateUrlStr}}</button>
            </div>
            <div class="col-md-4"></div>
          </div>
        </form>
      </div>
    </div>

    <div class="card right">
      <div class="card-header text-white" id="analysisInfoCard">Sentiment analysis information</div>
      <div class="card-body">
        Select an airline
        <select class="selectModel form-control">
          <option selected>All airlines</option>
          <option>Iberia</option>
          <option>...</option>
          <option>Cargar de la base de datos</option>
        </select>
        Select a sentiment library
        <select class="selectModel form-control">
          <option selected>Both libraries</option>
          <option>Text Blob</option>
          <option>Vader</option>
        </select>
        <canvas id="realtime">{{ chart }}</canvas>
      </div>
    </div>


    <div class="card right">
      <div class="card-header text-white" id="selectLibraryCard">Change selected analysis library</div>
      <div class="card-body">
        Selected sentiment library
        <select class="selectModel form-control">
          <option>Text Blob</option>
          <option>Vader</option>
        </select>
        Polarity range
        <ul>
          <li>
            <label class="label_style"><b>Positive sentiment: </b>From</label>
            <input lass ="input_style" type="text" [(ngModel)]="minPositive">
            <label class="label_style">to <b>1</b></label>
          </li>
          <li>
            <label class="label_style"><b>Neutral sentiment: </b>From <b>{{minPositive}}</b> to <b>{{maxNegative}}</b></label>
          </li>
          <li>
            <label style="margin-right: 1%;"><b>Negative sentiment: </b>From</label>
            <input class ="input_style" type="text" [(ngModel)]="maxNegative">
            <label style="margin-left: 1%;">to <b>-1</b></label>
          </li>
        </ul>

        <div class="row">
          <div class="col-md-4"></div>
          <div class="col-md-4">
            <button class="submit" id="selectLibraryBtn" title="Apply" class="form-control btn btn-dark" type="submit">Apply</button>
          </div>
          <div class="col-md-4"></div>
        </div>
      </div>
    </div>
  </div>
</div>
